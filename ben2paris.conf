
############################################# Front

server {
        root /opt/ben2paris/ben2Paris/dist/Front ;
        index index.html index.htm index.nginx-debian.html;

        server_name ben2paris.com www.ben2paris.com;

        location / {
                try_files $uri /index.html;
      }


    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/www.ben2paris.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/www.ben2paris.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot




}

##############################################



server {
        #root /opt/campusOcc/campus-occidental/build;
        #index index.html index.htm index.nginx-debian.html;
        location / {
	proxy_pass http://localhost:3000;
        #try_files $uri /index.html;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
      }
}



############################################# ADMIN

server {
        root /opt/ben2paris/webAdminBen2Paris/dist/webAdmin ;
        index index.html index.htm index.nginx-debian.html;

        server_name admin.ben2paris.com;

        location / {
                try_files $uri /index.html;
   	}


    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/admin.ben2paris.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/admin.ben2paris.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}

########################################### API

server
{
    #server_name admin.mburu.org www.admin.mburu.org;
    server_name api.ben2paris.com;
    # Tell Nginx and Passenger where your app's 'public' directory is
    #root /opt/campusOcc/api-campus0ccidental/server;
    # Turn on Passenger
    #passenger_enabled on;
    #passenger_app_type node;
    # Tell Passenger that your app is a SPA app
    #passenger_startup_file index.js;

    location / {
        proxy_pass http://localhost:9000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;

    }


    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/api.ben2paris.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/api.ben2paris.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}

########################################### FILE-SERVER

server
{
    #server_name admin.mburu.org www.admin.mburu.org;
    server_name files.ben2paris.com;
    # Tell Nginx and Passenger where your app's 'public' directory is
 

   #root /opt/campusOcc/api-campus0ccidental/server;
    # Turn on Passenger
    #passenger_enabled on;
    #passenger_app_type node;
    # Tell Passenger that your app is a SPA app
    #passenger_startup_file index.js;

    location / {
        proxy_pass http://localhost:8082;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;

    }


    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/files.ben2paris.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/files.ben2paris.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


}


########################################## Certbot generated

server {
    if ($host = www.ben2paris.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot



    if ($host = ben2paris.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot



        server_name ben2paris.com www.ben2paris.com;
    listen 80;
    return 404; # managed by Certbot




}


server
{
    if ($host = api.ben2paris.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    server_name api.ben2paris.com;
    listen 80;
    return 404; # managed by Certbot


}


server {
    if ($host = admin.ben2paris.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot



        server_name admin.ben2paris.com;
    listen 80;
    return 404; # managed by Certbot


}


server
{
    if ($host = files.ben2paris.com) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    server_name files.ben2paris.com;
    listen 80;
    return 404; # managed by Certbot


}
